<div class="flex flex-row">
  <mat-icon class="mr-2">{{ deviceTypeIcon(session.device?.type) }}</mat-icon>
  <div class="grow text-center">
    {{
      session.device?.brand
        ? session.device?.brand + ' ' + (session.device?.model ? session.device?.model : '')
        : session.device?.os
          ? session.device?.os
          : 'Unknown'
    }}
  </div>
  @if (session.token != auth.getToken() && !session.blockedAt && !session.closedAt) {
    <button matIconButton class="cursor-pointer" [matMenuTriggerFor]="menu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <a mat-menu-item (click)="confirmClose.open()"><mat-icon>logout</mat-icon> Close session</a>
    </mat-menu>
    <confirm #confirmClose (confirmed)="closeSession(session)"></confirm>
  }
</div>
@if (session.blockedAt) {
  <div class="mt-1 flex flex-row gap-1 justify-end text-error">
    <mat-icon>lock</mat-icon>
    Blocked
  </div>
}
@if (session.closedAt && !session.blockedAt) {
  <div class="mt-1 flex flex-row gap-1 justify-end text-muted">
    <mat-icon>cancel</mat-icon>
    <div>Closed</div>
  </div>
}
@if (session.token == auth.getToken()) {
  <div class="mt-1 flex flex-row gap-1 justify-end text-success">
    <mat-icon>check_circle</mat-icon>
    <div>Current device</div>
  </div>
}
@if (session.device?.ip) {
  <div class="mt-1 flex flex-row gap-1 text-muted">
    <mat-icon>language</mat-icon>
    <div>{{ session.device?.ip }}</div>
  </div>
}
@if (session.device?.client) {
  <div class="mt-1 flex flex-row gap-1">
    @if (browserIcon(session.device?.client) == 'unknown') {
      <mat-icon>travel_explore</mat-icon>
    } @else {
      <mat-icon svgIcon="{{ browserIcon(session.device?.client) }}"></mat-icon>
    }
    <div>{{ session.device?.client }}</div>
  </div>
}
<div class="mt-1 flex flex-row gap-1 text-muted">
  <mat-icon>event_available</mat-icon>
  <div>first login: {{ session.createdAt | amLocal | amDateFormat: 'LLL' }}</div>
</div>
<div class="mt-1 flex flex-row gap-1 text-muted">
  <mat-icon>access_time</mat-icon>
  <div>recent activity: {{ session.updatedAt | amLocal | amTimeAgo }}</div>
</div>
