<div class="relative flex flex-row gap-2">
  <mat-icon class="icon-inline-sm shrink-0">{{ deviceTypeIcon(session.device?.type) }}</mat-icon>
  <div class="grow text-sm">
    {{
      session.device?.brand
        ? session.device?.brand + ' ' + (session.device?.model ? session.device?.model : '')
        : session.device?.os
          ? session.device?.os
          : 'Unknown'
    }}
  </div>
  @if (session.token !== _auth.getToken() && !session.blockedAt && !session.closedAt) {
    <button matIconButton class="absolute! right-0 cursor-pointer" [matMenuTriggerFor]="menu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <a mat-menu-item (click)="confirmClose.open()"><mat-icon>logout</mat-icon> {{ 'shared.session.buttons.closeSession' | transloco }}</a>
    </mat-menu>
    <confirm #confirmClose (confirm)="closeSession(session)"></confirm>
  }
</div>
@if (session.blockedAt) {
  <div class="text-error mt-2 flex flex-row gap-2">
    <mat-icon class="icon-inline-sm shrink-0">lock</mat-icon>
    <div class="text-sm">{{ 'shared.session.labels.blocked' | transloco }}</div>
  </div>
}
@if (session.closedAt && !session.blockedAt) {
  <div class="text-muted mt-2 flex flex-row gap-2">
    <mat-icon class="icon-inline-sm shrink-0">cancel</mat-icon>
    <div class="text-sm">{{ 'shared.session.labels.closed' | transloco }}</div>
  </div>
}
@if (session.token === _auth.getToken()) {
  <div class="text-success mt-2 flex flex-row gap-2">
    <mat-icon class="icon-inline-sm shrink-0">check_circle</mat-icon>
    <div class="text-sm">{{ 'shared.session.labels.currentDevice' | transloco }}</div>
  </div>
}
@if (session.device?.ip) {
  <div class="text-muted mt-1 flex flex-row gap-2">
    <mat-icon class="icon-inline-sm shrink-0">language</mat-icon>
    <div class="text-sm">{{ session.device?.ip }}</div>
  </div>
}
@if (session.device?.client) {
  <div class="text-muted mt-1 flex flex-row gap-2">
    @if (browserIcon(session.device?.client) === 'unknown') {
      <mat-icon class="icon-inline-sm shrink-0">travel_explore</mat-icon>
    } @else {
      <mat-icon class="icon-inline-sm shrink-0" svgIcon="{{ browserIcon(session.device?.client) }}"></mat-icon>
    }
    <div class="text-sm">{{ session.device?.client }}</div>
  </div>
}
<div class="text-muted mt-1 flex flex-row gap-2">
  <mat-icon class="icon-inline-sm shrink-0">event_available</mat-icon>
  <div class="text-sm">{{ 'shared.session.labels.firstLogin' | transloco | lowercase }}: {{ session.createdAt | amLocal | amDateFormat: 'LLL' }}</div>
</div>
<div class="text-muted mt-1 flex flex-row gap-2">
  <mat-icon class="icon-inline-sm shrink-0">access_time</mat-icon>
  <div class="text-sm">
    {{
      (session.closedAt || session.blockedAt ? 'shared.session.labels.lastActivity' : 'shared.session.labels.recentActivity') | transloco | lowercase
    }}: {{ session.updatedAt | amLocal | amTimeAgo }}
  </div>
</div>
