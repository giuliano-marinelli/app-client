<div class="container ps-0 ps-sm-3" *ngVar="{ collapsed: true, logoHover: false } as navbarSettings">
  <div class="row mt-3 ps-3 ps-sm-0">
    <div *ngIf="auth.loading">
      <fa-icon [icon]="'spinner'" [spin]="true" [pulse]="true" size="3x"></fa-icon>
    </div>
    <div class="d-flex flex-column flex-sm-row align-items-sm-center justify-content-between"
      *ngIf="!auth.loading && auth.user">
      <div class="d-flex flex-row align-items-center">
        <img class="me-3 img-thumbnail img-thumbnail-sm rounded-circle profile-img" [src]="auth.user.profile?.avatar"
          onerror="this.src='assets/images/default-user.png'" />
        <div class="d-flex flex-column">
          <a class="text-body" routerLink="/user/{{ auth.user.username }}">
            <h3 class="mb-1">
              {{ auth.user.profile?.name ? auth.user.profile?.name : auth.user.username }}
            </h3>
          </a>
          <div class="text-muted small ms-1">Your personal account</div>
        </div>
      </div>
      <div class="d-flex flex-row align-items-center justify-content-between">
        <a class="btn btn-secondary btn-sm mt-2" routerLink="/user/{{ auth.user.username }}">
          Go to your personal profile
        </a>
        <button class="btn d-sm-none no-outline border-0 text-body navbar-collapse-btn"
          (click)="navbarSettings.collapsed = !navbarSettings.collapsed">
          <fa-icon [icon]="'ellipsis-v'"></fa-icon>
        </button>
      </div>
    </div>
  </div>
  <div class="row mt-sm-3">
    <div class="col-sm-4 col-md-3 navbar ps-4 ps-sm-2 pe-2 pe-sm-0 align-items-baseline">
      <nav class="navbar-collapse collapse d-sm-block" [ngbCollapse]="navbarSettings.collapsed">
        <ul class="navbar-nav">
          <li class="nav-item d-flex rounded">
            <a class="pe-pointer flex-fill p-2 text-body text-sm rounded" routerLink="/settings/profile"
              routerLinkActive="active" (click)="navbarSettings.collapsed = true">
              <fa-icon [icon]="'user'"></fa-icon> Profile
            </a>
          </li>
          <li class="nav-item d-flex rounded">
            <a class="pe-pointer flex-fill p-2 text-body text-sm rounded" routerLink="/settings/account"
              routerLinkActive="active" (click)="navbarSettings.collapsed = true">
              <fa-icon [icon]="'gear'"></fa-icon> Account
            </a>
          </li>
          <li class="nav-item d-flex rounded">
            <a class="pe-pointer flex-fill p-2 text-body text-sm rounded" routerLink="/settings/notifications"
              routerLinkActive="active" (click)="navbarSettings.collapsed = true">
              <fa-icon [icon]="'bell'"></fa-icon> Notifications
            </a>
          </li>
          <hr class="mx-2 mt-1 mb-2">
          <span class="flex-fill ps-3 text-muted text-sm rounded">Access</span>
          <li class="nav-item d-flex rounded">
            <a class="pe-pointer flex-fill p-2 text-body text-sm rounded" routerLink="/settings/emails"
              routerLinkActive="active" (click)="navbarSettings.collapsed = true">
              <fa-icon [icon]="'envelope'"></fa-icon> Emails
            </a>
          </li>
          <li class="nav-item d-flex rounded">
            <a class="pe-pointer flex-fill p-2 text-body text-sm rounded" routerLink="/settings/security"
              routerLinkActive="active" (click)="navbarSettings.collapsed = true">
              <fa-icon [icon]="'key'"></fa-icon> Passwords
            </a>
          </li>
          <li class="nav-item d-flex rounded">
            <a class="pe-pointer flex-fill p-2 text-body text-sm rounded" routerLink="/settings/devices"
              routerLinkActive="active" (click)="navbarSettings.collapsed = true">
              <fa-icon [icon]="'mobile'"></fa-icon> Devices
            </a>
          </li>
        </ul>
      </nav>
    </div>
    <div class="content col-sm-8 col-md-9 ps-4 ps-sm-0">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>