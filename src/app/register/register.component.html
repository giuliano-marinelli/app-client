<div class="container">
  <div class="m-auto mt-md-4" style="max-width: 680px">
    <div class="row flex-column-reverse flex-md-row align-items-center">
      <div class="alert alert-dark rounded-3 col-12 col-md-6">
        <div #message_container></div>
        <form [formGroup]="registerForm" (ngSubmit)="register()">
          <div class="mb-3">
            <label class="form-label">
              Email address
            </label>
            <div class="input-spinner">
              <input class="form-control" type="email" name="email" formControlName="email" autofocus autocomplete="off"
                [ngClass]="setValid(email)" />
              <fa-icon *ngIf="email.pending" [icon]="'spinner'" [spin]="true" [pulse]="true"></fa-icon>
              <div class="invalid-feedback">
                <div *ngIf="email?.errors?.['required']">
                  Email is required.
                </div>
                <div *ngIf="email?.errors?.['maxlength']">
                  Email must be as maximum 100 characters long
                </div>
                <div *ngIf="email?.errors?.['email']">
                  Email must be on the format example&#64;email.com
                </div>
                <div *ngIf="email?.errors?.['emailExists']">
                  Email is already taken, please try another one
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">
              Username
            </label>
            <div class="input-spinner">
              <input class="form-control" type="text" name="username" formControlName="username" autocomplete="off"
                [ngClass]="setValid(username)" />
              <fa-icon *ngIf="username.pending" [icon]="'spinner'" [spin]="true" [pulse]="true"></fa-icon>
              <div class="invalid-feedback">
                <div *ngIf="username?.errors?.['required']">
                  Username is required
                </div>
                <div *ngIf="username?.errors?.['minlength'] || username?.errors?.['maxlength']">
                  Username must be at 4-30 characters long
                </div>
                <div *ngIf="username?.errors?.['pattern']">
                  Username can only have characters, numbers and _ or - symbols
                </div>
                <div *ngIf="username?.errors?.['usernameExists']">
                  Username is already taken, please try another one
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Password</label>
            <input class="form-control" type="password" name="password" formControlName="password"
              autocomplete="new-password" [ngClass]="setValid(password)" />
            <div class="invalid-feedback">
              <div *ngIf="password?.errors?.['required']">
                Password is required
              </div>
              <div *ngIf="password?.errors?.['minlength'] || password?.errors?.['maxlength']">
                Password must be at 8-100 characters long
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Repeat Password</label>
            <input class="form-control" type="password" name="confirmPassword" formControlName="confirmPassword"
              autocomplete="off" [ngClass]="setValid(confirmPassword)" />
            <div class="invalid-feedback">
              <div *ngIf="confirmPassword?.errors?.['required']">This field is required</div>
              <div *ngIf="confirmPassword?.errors?.['equalTo']">Passwords must be equals</div>
            </div>
          </div>
          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary text-white" [disabled]="!registerForm.valid || submitLoading">
              Register <fa-icon *ngIf="submitLoading" [icon]="'spinner'" [spin]="true" [pulse]="true"></fa-icon>
            </button>
          </div>
        </form>
      </div>
      <div class="col-12 col-md-6">
        <div class="my-4 text-center">
          <fa-icon [icon]="'user-plus'" size="6x"></fa-icon>
        </div>
        <h3 class="fs-3 fw-light text-center">Start your latest big project with App!</h3>
      </div>
    </div>
    <div class="row">
      <div class="alert alert-secondary rounded-3 text-center col">
        Did you already have an account? <a routerLink="/login">Login here</a>
      </div>
    </div>
  </div>
</div>